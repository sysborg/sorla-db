(()=>{var t={317:(t,e,r)=>{const n=r(994);t.exports=class extends n{constructor(t){super(t),this._documents=[],this._indexes=[]}}},768:(t,e,r)=>{const n=r(317);t.exports=class{constructor(t){return this._collections={},this._name=t,this._collectionCount=0,new Proxy(this,{get:(t,e,r)=>e in t._collections?t._collections[e]:t[e]})}get name(){return this._name}createCollection(t,e){if(this._collections.hasOwnProperty(t)||void 0!==this[t])throw new Error("Collection already exists");this._collections[t]=new n(e),this._collectionCount++}countCollections(){return this._collectionCount}}},465:(t,e,r)=>{const n=r(555);t.exports=class{constructor(t){return this._data=t,this._utils=new n,new Proxy(this,{get:(t,e,r)=>e.indexOf(".")>-1?t._utils.getDotData(t._data,e):e in t._data?t._data[e]:t[e]})}}},625:(t,e,r)=>{const n=r(465),s=r(73);t.exports=class{constructor(t=null){this.validationSchema=t,this._index={},this._prohibitedCharacters=["$","."]}_generateKey(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}set validationSchema(t){if("undefined"!=typeof schemaValidation&&null!==schemaValidation){if(-1==["object","function"].indexOf(typeof schemaValidation))throw new Error("Invalid schema validation");this._validationSchema=t}}_validate(t){return!0}_validateDocumentsType(t){return t.reduce(((t,e)=>"object"!=typeof e?++t:t),0)}_validateKeys(t){const e=Object.keys(t),r=new s;for(let n of e){if(this._prohibitedCharacters.reduce(((t,e)=>n.indexOf(e)>-1?++t:t),0)>0&&!r.isOperator(n))return!1;if("object"==typeof t[n])return this._validateKeys(t[n]);if(Array.isArray(t[n]))for(let e of t[n])if("object"==typeof e)return this._validateKeys(e)}return!0}insertOne(t,e){if("object"!=typeof t||Array.isArray(t))throw new Error("Invalid document type");if(!this._validateKeys(t))throw new Error("Invalid document keys");if(void 0===t._id){let e="";do{e=this._generateKey()}while(this._documents.find((e=>e._id===t._id)));t._id=e}if(!this._validate(t))throw new Error("Invalid document");this._documents.push(new n(t)),"function"==typeof e&&e()}insertMany(t,e){if(console.info(this._validateDocumentsType(t)),!Array.isArray(t)||this._validateDocumentsType(t)>0)throw new Error("Documents must be an array of objects");for(let e of t)this.insertOne(e);"function"==typeof e&&e()}}},73:t=>{t.exports=class{isOperator(t){return["$or","$and","$lt","$lte","$gt","$gte","$eq","$ne"].indexOf(t)>-1}operatorAnd(t){}operatorNot(t){}get $or(){return(t,e)=>{if(!Array.isArray(t))throw new Error("The $or operator must be an array");return t.forEach((t=>{})),!1}}get $and(){return this.operatorAnd}get $not(){return this.operatorNot}lessThan(t,e,r){return t[e]<r}lessThanOrEqual(t,e,r){return t[e]<=r}greaterThan(t,e,r){return t[e]>r}greaterThanOrEqual(t,e,r){return t[e]>=r}equal(t,e,r){return t[e]==r}notEqual(t,e,r){return t[e]!=r}get $lt(){return this.lessThan}get $lte(){return this.lessThanOrEqual}get $gt(){return this.greaterThan}get $gte(){return this.greaterThanOrEqual}get $eq(){return this.equal}get $ne(){return this.notEqual}}},994:(t,e,r)=>{const n=r(625),s=r(73);t.exports=class extends n{constructor(t){console.log("manipulation",n),super(t),this._operators=new s}count(){return this._documents.length}_deepFind(t,e=!1){const r=[],n=s=>{Object.keys(s).forEach((o=>{if(o in this._operators&&this._operators[o](s[o],t[o])&&r.push(s),"object"==typeof s[o])n(s[o]);else if(s[o]===t[o]&&(r.push(s),e))return s}))};return n(this._documents),r}_projection(t,e){const r="object"==typeof t;t=Array.isArray(t)?t:[t];for(let r in e)t.forEach((t=>{0===e[r]&&delete t[r]}));return r?t[0]:t}findOne(t,e=null){const r=0===Object.keys(t).length?this._documents[0]._data:this._deepFind(t,!0);return"object"==typeof e?this._projection(r,e):r}find(t,e=null){}}},673:(t,e,r)=>{const n=r(768);t.exports=class{constructor(){this._dbs=[],this._selectedDb=null}_findDbIndex(t){return this._dbs.findIndex((e=>e.name==t))}dbExists(t){return this._findDbIndex(t)>-1}_selectDb(t){if(!this._dbs.hasOwnProperty(t))throw new Error("Database does not exists");this._selectedDb=this._dbs[t]}createDb(t){if(this.dbExists(t))return!1;let e=this._dbs.length;return this._dbs.push(new n(t)),e}useDb(t){let e=null;this.dbExists(t)||(e=this.createDb(t)),this._selectDb(null===e?this._findDbIndex(t):e)}countDb(){return this._dbs.length}get db(){return this._selectedDb}}},555:t=>{t.exports=class{get uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){let e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}getDotData(t,e){return e.split(".").forEach((e=>{void 0!==t[e]&&(t=t[e])})),t}}}},e={};!function r(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}(673)})();