!function r(t,e,n){function o(i,a){if(!e[i]){if(!t[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(s)return s(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[i]={exports:{}};t[i][0].call(l.exports,(function(e){return o(t[i][1][e]||e)}),l,l.exports,r,t,e,n)}return e[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(t,e,n){const s=t("../query_language/query.js");e.exports=class extends s{constructor(t){super(t),this._documents=[],this._indexes=[]}}},{"../query_language/query.js":7}],2:[function(t,e,n){const s=t("../collections/collection.js");e.exports=class{constructor(t){return this._collections={},this._name=t,this._collectionCount=0,new Proxy(this,{get:(t,e,n)=>e in t._collections?t._collections[e]:t[e]})}get name(){return this._name}createCollection(t,e){if(this._collections.hasOwnProperty(t)||void 0!==this[t])throw new Error("Collection already exists");this._collections[t]=new s(e),this._collectionCount++}countCollections(){return this._collectionCount}}},{"../collections/collection.js":1}],3:[function(t,e,n){const s=t("../utils");e.exports=class{constructor(t){return this._data=t,this._utils=new s,new Proxy(this,{get:(t,e,n)=>e.indexOf(".")>-1?t._utils.getDotData(t._data,e):e in t._data?t._data[e]:t[e]})}}},{"../utils":9}],4:[function(t,e,n){},{}],5:[function(t,e,n){const s=t("../documents/document.js"),i=t("./operators.js");e.exports=class{constructor(t=null){this.validationSchema=t,this._index={},this._prohibitedCharacters=["$","."]}_generateKey(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}set validationSchema(t){if("undefined"!=typeof schemaValidation&&null!==schemaValidation){if(-1==["object","function"].indexOf(typeof schemaValidation))throw new Error("Invalid schema validation");this._validationSchema=t}}_validate(t){return!0}_validateDocumentsType(t){return t.reduce(((t,e)=>"object"!=typeof e?++t:t),0)}_validateKeys(t){const e=Object.keys(t),n=new i;for(let s of e){if(this._prohibitedCharacters.reduce(((t,e)=>s.indexOf(e)>-1?++t:t),0)>0&&!n.isOperator(s))return!1;if("object"==typeof t[s])return this._validateKeys(t[s]);if(Array.isArray(t[s]))for(let e of t[s])if("object"==typeof e)return this._validateKeys(e)}return!0}insertOne(t,e){if("object"!=typeof t||Array.isArray(t))throw new Error("Invalid document type");if(!this._validateKeys(t))throw new Error("Invalid document keys");if(void 0===t._id){let e="";do{e=this._generateKey()}while(this._documents.find((e=>e._id===t._id)));t._id=e}if(!this._validate(t))throw new Error("Invalid document");this._documents.push(new s(t)),"function"==typeof e&&e()}insertMany(t,e){if(console.info(this._validateDocumentsType(t)),!Array.isArray(t)||this._validateDocumentsType(t)>0)throw new Error("Documents must be an array of objects");for(let e of t)this.insertOne(e);"function"==typeof e&&e()}}},{"../documents/document.js":3,"./operators.js":6}],6:[function(t,e,n){e.exports=class{isLogicalOperator(t){return["$or","$and","$not","$nor"].indexOf(t)>-1}isOperator(t){return["$lt","$lte","$gt","$gte","$eq","$ne","$in","$nin"].indexOf(t)>-1}get $or(){return(t,e)=>{if(!Array.isArray(t))throw new Error("The $or operator must be an array");let n=[];t:for(const s of e)for(const i of t)for(const t of Object.keys(i))if(this.isOperator(t));else if("object"==typeof e[t]);else if(Array.isArray(e[t]));else if(s[t]===i[t]){n.push(structuredClone(s._data));continue t}return n}}get $and(){return(t,e)=>{if(!Array.isArray(t))throw new Error("The $and operator must be an array");let n=[];t:for(const s of e){for(const n of t)for(const t of Object.keys(n))if(this.isOperator(t));else if("object"==typeof e[t]);else if(Array.isArray(e[t]));else if(s[t]!==n[t])continue t;n.push(structuredClone(s._data))}return n}}get $not(){return this.operatorNot}lessThan(t,e,n){return t[e]<n}lessThanOrEqual(t,e,n){return t[e]<=n}greaterThan(t,e,n){return t[e]>n}greaterThanOrEqual(t,e,n){return t[e]>=n}equal(t,e,n){return t[e]==n}get $lt(){return this.lessThan}get $lte(){return this.lessThanOrEqual}get $gt(){return this.greaterThan}get $gte(){return this.greaterThanOrEqual}get $eq(){return this.equal}get $ne(){return this.notEqual}}},{}],7:[function(t,e,n){const s=t("./manipulation.js"),i=t("./operators.js");e.exports=class extends s{constructor(t){super(t),this._operators=new i}count(){return this._documents.length}_deepFind(t,e,n=!1){let s=[];return(n=>{let i=[];t:for(let e of this._documents){for(let n of Object.keys(t))if(this._operators.isLogicalOperator(n)&&!this._operators[n](t[n],e))continue t;i.push(0),s.push(structuredClone(e._data))}Object.keys(t).forEach((n=>{if(n in this._operators){const i=this._operators[n](t[n],e);s=[...s,...i]}}))})(this._documents),n?s[0]:s}_projection(t,e){if(null===e)return t;const n=!Array.isArray(t)&&"object"==typeof t;t=Array.isArray(t)?t:[t];for(let n in e)t.forEach((t=>{0===e[n]&&delete t[n]}));return n?t[0]:t}findOne(t,e=null){const n=0===Object.keys(t).length?structuredClone(this._documents[0]._data):this._deepFind(t,this._documents,!0);return this._projection(n,e)}find(t,e=null){const n=0===Object.keys(t).length?structuredClone(this._documents):this._deepFind(t,this._documents);return this._projection(n,e)}}},{"./manipulation.js":5,"./operators.js":6}],8:[function(t,e,n){const s=t("./dbs/database.js");class sorla{constructor(){this._dbs=[],this._selectedDb=null}_findDbIndex(t){return this._dbs.findIndex((e=>e.name==t))}dbExists(t){return this._findDbIndex(t)>-1}_selectDb(t){if(!this._dbs.hasOwnProperty(t))throw new Error("Database does not exists");this._selectedDb=this._dbs[t]}createDb(t){if(this.dbExists(t))return!1;let e=this._dbs.length;return this._dbs.push(new s(t)),e}useDb(t){let e=null;this.dbExists(t)||(e=this.createDb(t)),this._selectDb(null===e?this._findDbIndex(t):e)}countDb(){return this._dbs.length}get db(){return this._selectedDb}}e.exports=sorla,"undefined"!=typeof window&&(window.sorla=sorla)},{"./dbs/database.js":2}],9:[function(t,e,n){e.exports=class{get uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){let e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}getDotData(t,e){return e.split(".").forEach((e=>{void 0!==t[e]&&(t=t[e])})),t}}},{}]},{},[1,2,3,4,5,6,7,8,9]);